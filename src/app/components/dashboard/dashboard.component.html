<div class="container-fluid ">
  <div class="row">


    <H1>Dashboard LabCybersec</H1>
    <!-- Agregar nuevo host -->
    <!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////-->
    <!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////-->
  <ng-template #crearHost let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Agregar nuevo host</h4>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <form autocomplete="off" [formGroup]="miFormulario" (ngSubmit)="guardar()" novalidate>

        <!-- Nombres -->
        <div class="mb-3 row">
          <label class="col-sm-3 col-form-label">Nombres</label>
          <div class="col-sm-9">
            <input class="form-control" formControlName="nombre" placeholder="Ingrese el nombre del host">
            <div
              *ngIf="miFormulario.controls['nombre'].invalid && (miFormulario.controls['nombre'].dirty || miFormulario.controls['nombre'].touched)"
              class="alert alert-danger">
              <div *ngIf="miFormulario.controls['nombre'].hasError('required')">
                <span>* Campo obligatorio</span>
              </div>
              <div *ngIf="(miFormulario.controls['nombre'].dirty)">
                <span>* Campo invalido</span>
              </div>
            </div>
          </div>
        </div>

        <!-- ip -->
        <div class="mb-3 row">
          <label class="col-sm-3 col-form-label">IP</label>
          <div class="col-sm-9">
            <input class="form-control" formControlName="ip" placeholder="Ingrese el ip del host">
            <div
              *ngIf="miFormulario.controls['ip'].invalid && (miFormulario.controls['ip'].dirty || miFormulario.controls['ip'].touched)"
              class="alert alert-danger">
              <div *ngIf="miFormulario.controls['ip'].hasError('required')">
                <span>* Campo obligatorio</span>
              </div>
              <div *ngIf="(miFormulario.controls['ip'].dirty)">
                <span>* Campo invalido</span>
              </div>
            </div>
          </div>
        </div>

        <!-- tag -->
        <div class="mb-3 row">
          <label class="col-sm-3 col-form-label">Tag</label>
          <div class="col-sm-9">
            <input class="form-control" formControlName="tag" placeholder="Ingrese una etiqueta para el host">
            <div
              *ngIf="miFormulario.controls['tag'].invalid && (miFormulario.controls['tag'].dirty || miFormulario.controls['tag'].touched)"
              class="alert alert-danger">
              <div *ngIf="miFormulario.controls['tag'].hasError('required')">
                <span>* Campo obligatorio</span>
              </div>
              <div *ngIf="(miFormulario.controls['tag'].dirty)">
                <span>* Campo invalido</span>
              </div>
            </div>
          </div>
        </div>


        <!-- botones cancelar y crear -->
        <div class="row">
          <div class="col-sm-3"></div>
          <div class="col-sm-9">
            <button class="btn btn-success" type="button" data-dismiss="crearHost" (click)="guardar()">Crear</button>
            <button class="btn btn-warning" type="button" (click)="resetearCampos()">Limpiar campos</button>
            <button class="btn btn-danger" type="button" (click)="modal.dismiss('Cross click')">Cancelar</button>
          </div>
        </div>
      </form>
    </div>
  </ng-template>
  <div>
    <button class="btn btn-primary" mat-button (click)="abrirModal(crearHost)">Agregar nuevo host</button>
    <div style="float: right; padding-right: 20px;">
    <button id="botonModoOscuro" (click)="onValChange()" mat-fab color="primary" aria-label="Modo oscuro" style="float: right;">
      <mat-icon>lightbulb</mat-icon>
    </button>
    <button (click)="cambiarTipoVista()" mat-fab color="primary" aria-label="tipo de vista" style="float: right;">
      <mat-icon>visibility</mat-icon>
    </button>
    </div>
  </div>
</div>
  <!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////-->
  <!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////-->
  <!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////-->

 


  <!-- Graficos-->
  <!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////-->
  <!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////-->
  <!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////-->
  <div class="row grafico  ">

    <div *ngFor="let host of hosts; let i = index" class="col-auto  ">
      <div *ngIf="modoCompacto == true; then compacto else extendido"></div>

      <ng-template #compacto>
        <div class="cardGraficoCompacto">
        <mat-card id="cardCompacto">
          <mat-card-title>
            Servidor: {{host.host}}
            <button type="button" class="btn-close" (click)="clickMethod(host.hostid, host.host)" style="float: right;"></button>
          </mat-card-title>

          <apx-chart [series]="chartOptionsCompacto[i]['series']" [chart]="chartOptionsCompacto[i]['chart']"
            [plotOptions]="chartOptionsCompacto[i]['plotOptions']" [labels]="chartOptionsCompacto[i]['labels']"
            [legend]="chartOptionsCompacto[i]['legend']" [colors]="chartOptionsCompacto[i]['colors']"
            [responsive]="chartOptionsCompacto[i]['responsive']" [title]="chartOptionsCompacto[i]['title']"></apx-chart>
        </mat-card>
        <br>
      </div>
      </ng-template>

      <ng-template #extendido>
        <div class="cardGrafico">
        <mat-card id="card">
          <div *ngIf="host.active_available == '1'; then activo else inactivo"></div>
          <ng-template #activo>
            <div class="row">
              <div class="col-8">
            <mat-card-title>
              Servidor: {{host.host}}
            </mat-card-title>
            <mat-card-subtitle>
              Status: Online <span>ðŸŸ¢</span>
            </mat-card-subtitle>
          </div>
            <div class="col-4">
            <button type="button" class="btn-close" (click)="clickMethod(host.hostid, host.host)" style="float: right;"></button>
            
            <mat-card-actions align="end">
              <button mat-button id="botonLog" class="btn btn-light" (click)="obtenerLogs(host.hostid)">Descargar Logs</button>
            </mat-card-actions>
          </div>
          </div>


            <div class="row GraficosRadial">
              <div class="col-3" *ngFor="let j of [0,1,2,3]">
                <apx-chart [series]="chartOptions[i][j]['series']" [chart]="chartOptions[i][j]['chart']"
                  [xaxis]="chartOptions[i][j]['xaxis']" [title]="chartOptions[i][j]['title']"
                  [stroke]="chartOptions[i][j]['stroke']" [fill]="chartOptions[i][j]['fill']"
                  [tooltip]="chartOptions[i][j]['tooltip']" [plotOptions]="chartOptions[i][j]['plotOptions']"
                  [labels]="chartOptions[i][j]['labels']"></apx-chart>
              </div>
            </div>
            <div id="graficoSpline" class="row">
              <div class="col-12">
                <apx-chart [series]="chartOptions[i][4]['series']" [chart]="chartOptions[i][4]['chart']"
                  [title]="chartOptions[i][4]['title']" [stroke]="chartOptions[i][4]['stroke']"
                  [xaxis]="chartOptions[i][4]['xaxis']" [dataLabels]="chartOptions[i][4]['dataLabels']"
                  [plotOptions]="chartOptions[i][4]['plotOptions']" [tooltip]="chartOptions[i][4]['tooltip']">
                </apx-chart>
              </div>
            </div>
          </ng-template>
          <ng-template #inactivo>
            <div class="cardGrafico">
              <mat-card-title>                
                Servidor: {{host.host}}
              </mat-card-title>
            <mat-card-subtitle>
              Status: Offline <span>ðŸ”´</span>
            </mat-card-subtitle>
          </div>
          <button type="button" class="btn-close" (click)="clickMethod(host.hostid, host.host)" style="float: right; position: relative;top: -60px;"></button>
          </ng-template>

          <ng-template #infoExt let-modal>

            <div class="modal-header">
              <h4 class="modal-title" id="modal-basic-title">Mas informacion</h4>
              <button type="button" class="btn-close" aria-label="Close"
                (click)="modal.dismiss('Cross click')"></button>
            </div>
            <div class="modal-body">
            </div>
          </ng-template>

          <ng-template #logs let-modal>
            <div class="modal-header">
              <h4 class="modal-title" id="modal-basic-title">Logs</h4>
              <button type="button" class="btn-close" aria-label="Close"
                (click)="modal.dismiss('Cross click')"></button>
            </div>
            <div class="modal-body">
              
            
            </div>
          </ng-template>
        </mat-card>
      </div>
        <br>
      </ng-template>
    </div>
  </div>
</div>







<!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////-->
<!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////-->
<!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////-->